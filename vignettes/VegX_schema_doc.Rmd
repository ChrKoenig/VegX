---
title: "Veg-X schema documentation"
author: "IAVS Ecoinformatics Working Group"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    css: mystyle.css
vignette: >
  %\VignetteIndexEntry{Veg-X schema documentation}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

## About Veg-X

The exchange standard for plot-based vegetation data (Veg-X) is a standard intended to be used for sharing and merging vegetation-plot data of different kinds. It was created by the *Ecoinformatics Working Group* of the **International Association for Vegetation Science** (http://iavs.org).

## Overview of Veg-X standard

Our goal was to produce a standard specifically for vegetation-plot data that is relatively simple to read and use. To achieve this we avoided highly nested structures and included major vegetation data components (e.g. plot attributes, plot observations, organisms) as top-level elements that are referenced by  each other through unique identifiers (e.g. a unique numerical ID) that allow the integrity of the original linkage to be captured. Although the main logical structure of vegetation data (i.e. the logical relationships between major data components) is fixed, we allowed for alternative, user-defined ways of grouping observations. As such, the standard can accommodate projects that are linked across time as well as longitudinal measures of plots or individuals to the extent that these are referenced in the original dataset through appropriate unique identifiers in those original sources.

The standard accommodates different data collection protocols by allowing specific aspects of data collection methods to be captured, such as whether plots were located subjectively or randomly, plot dimensions, definitions of cover-abundance scales, references to published methods, etc. The standard also allows for the original units of measurement to be retained. All elements in the standard are clearly defined. This allows synonymous terms in source datasets to be mapped to a common set of concepts, thus overcoming the problems caused by inconsistent terminologies.

The *plotObservation* is the central Veg-X element, resulting from sampling a physical plot at a specific point in time, and can be related to one or more research projects (Fig. 1). The information about a sampled plot that is fixed over time (e.g. altitude, plot identifier or name, dimensions, aspect, slope, geology) and references to related plots (e.g. a parent plot) are stored in the separate element *plot*. By structuring the plot data in this way, repeat measures and nested plots can be accommodated in the standard. For the top-level element project we adopted the **Ecological Metadata Language** (EML; http://knb.ecoinformatics.org/software/eml/)  project module. EML provides structured, well-defined categories for documenting the key aspects of ecological datasets and is supported by a number of institutions (Jones et al. 2006).

Specific observations, either biotic or abiotic, are components of the plot observation element. The standard allows for observations of vegetation at both the individual specimen (*individualOrganismObservation*) and aggregated organism (*aggregateOrganismObservation*) levels. The standard maintains a clear distinction between the entity of interest (e.g. an individual organism, plot, or stratum) and the observation act (e.g. a measuring event applied to it). Together with unique identifiers that maintain the integrity of references between individual records within each component (e.g. between a plot and all the measuring events applied to it), the separation of components allows the standard to store multiple observations of the same entity (e.g. a plot or a tree). Analogously, a single observation event (e.g. a plot observation) may apply to multiple entities, thereby providing explicit grouping of entity observations. Each entity of interest (e.g. a tree) may have multiple observed properties (e.g. height, dbh) whose values are determined through measurement using a specific procedure or a method belonging to a particular protocol. Unlike individual organism observations, aggregated organism observations do not relate to a specific physical entity but provide estimates of the importance of a (abstract) taxonomic entity within the plot, such as through a cover estimate. Strata can be the subject of stratum observations (e.g. % of tree cover, tree height) and can be linked to aggregated organisms observations (Fig. 1). 

The standard also maintains a distinction between taxonomic identity (the taxon or taxon concept) and how these identities are applied to particular observations of organisms. This is done through three top-level elements: (1) *taxonConcept* is a specific taxonomic concept (i.e. a name–reference combination); (2) *taxonNameUsageConcept* is a particular type of organism referencing one or more individual or aggregate occurrences in one or more plots and typically associated with a taxon name string used by the author of the dataset; (3) *taxonDetermination* is an assertion, made by a party, linking one or more *taxonConcepts* to a *taxonNameUsageConcept.* All the organism observations referencing a given taxonNameUsageConcept are affected by determination events applied to it. This allows different determinations and taxonomic concepts to be associated with a vegetation entity so temporal changes in opinion regarding identification (i.e. "determination history") can be recorded and both formal (i.e. taxon names) and informal (e.g. "field names", "morphospecies") names applied simultaneously to a particular organism observation can be preserved. The fact that the *taxonNameUsageConcept* is not nested within observations permits the same name string to be reused within the scope of the dataset. Community determinations are handled in a similar way: *communityDetermination* elements allow a given plot observation to be related to one or multiple community concepts, although the lack of informal field names removes the need for a *communityNameUsageConcept* entity.

Although the standard supports fully-specified taxonomic concepts, it does not require them. This is important as the full concept is unspecified and furthermore unrecoverable for most legacy data. On the other hand, because the schema can accommodate determination information (who did the identification, when, and with what reference), in theory it could be possible to recover concepts for many legacy datasets – in particular, tropical forest plots where such information is commonly preserved in the form of herbarium voucher specimens.

Veg-X is written as an XML schema, which is a definition of user-defined tags to structure textual information in order to create self-describing datasets. XML (Extensible Markup Language) is an open standard, and XML files are both machine and human-readable (they are stored in plain-text ASCII format). These characteristics help to ensure that data in this format will be accessible in the future. We made use of existing XML schema definitions, which we incorporated as modules of our schema. Specifically, we used parts of the Ecological Metadata Language to define entities like projects or protocols. Similarly, we used TDWG standards such as the Darwin Core geospatial extension (http://wiki.tdwg.org/twiki/bin/view/DarwinCore/GeospatialExtension) to deal with georeferences, and the Taxon Concept Schema (http://www.tdwg.org/standards/117/) for taxon names and concepts. Updated versions of the Veg-X XML schema, as well as a prototype import/export utility, can be found at the TDWG Vegetation Web group page (http://wiki.tdwg.org/twiki/bin/view/Vegetation/WebHome).

## Logical structure and main elements of Veg-X (1.6.0)

Veg-X has a non-hierarchical data structure. Different data elements relate to each other via identifiers in a flexible way. The following figure illustrates the relationships between the main elements of Veg-X. The VegX R package uses a simplified version of the VegX schema, and only a subset of the main elements are included.

![Fig. 1. Main VegX elements and their logical relationships. Arrows indicate an identifier of the origin element is referenced in the destination element. Accompanying numbers indicate the number of instances of the origin element that are allowed to be referenced in the destination element.](LogicalStructure_1.6.0.png) 


The following table provides the description of the main elements of the standard:

Main element                   | Description                                     |  R  |
------------------------------ | ----------------------------------------------- | --- |
project                        | Describes the research context in which the dataset was created, including descriptions of over-all motivations and goals, funding, personnel, description of the study area etc. | Yes |
plot                           | A plot is a sampling location. It records the properties of the vegetation plot independent of time and can be referenced by many observations by links to the unique plot code. | Yes |
plotObservation                | Observations made on a single plot and during a single date-time period. This allows all time dependent parameters to be grouped. | Yes |
taxonNameUsageConcept          | A taxon name string occurring within the dataset. This is a usage concept defined by the dataset author which may follow, or be according to, an additional third party. It may be further related to a published name (taxon name, tcs:TaxonName) and or taxonomic name (taxon concept, tcs:TaxonConcept) in taxonDetermination. | Yes |
individualOrganismObservation  | An observation applying to one occurrence of an organism (or part of an organism). It is a container for measurements made on the organism (e.g. diameter, height, crown dimensions, biomass, growth form, number of stems). | Yes |
individualOrganism             | An identified organism recorded during one or more individual organism observation events. Individuals may have an identification label (e.g. tree tag number).| Yes |
aggregatedOrganismObservation  | An observation applying to all occurrences of an organism based on an aggregation factor. |
stratumObservation             | A specific observation applying to a stratum in a single plot during a single date-time period. Each stratum measurement may be referenced by observations of taxa within a plot. For example, abundance estimates of a taxa on a plot within a specific stratum. | Yes |
stratum                        | The specific definition of a stratum referred to by observations in the dataset. A stratum usually belongs to a ordered list that together are the set of strata definitions in use in a specific dataset. | Yes |
siteObservation             | A container for all the site observations made on a single Plot during a single date-time period. | Yes |
surfaceCover | TO BE DONE | No |
surfaceCoverObservation | TO BE DONE | No |
vegetationObservation | TO BE DONE | No |
taxonName                      | A published nomenclatural unit of any rank (order, family, genus, species, subspecies, etc.). Each name is of type tcs:scientificName and may be referenced in taxonDetermination allowing a name usage concept (author name) to be determined or asserted as a specific published nomenclatural name. tcs:scientificName:citation is contained in the literature container. | No |
taxonConcept                   | Representation of a taxon concept. Each taxon concept follows tcs:taxonConcept and may be referenced in taxonDetermination allowing a name usage concept (author name) to be determined or asserted as a specific published taxonomic name/concept. | No |
taxonDetermination             | A specific relationship or assertion between two name concepts which are not part of the original definition of either of these concepts; possibly by a third party. Allows for an author usage concept, i.e. a name string used by the author in this dataset, to be linked to either a published nomenclatural name (taxon name) or a specific taxa treatment (taxon concept), according to a third party. | No |
communityConcept | A name and some kind of definition of a community type, preferably a community name as used in a reference. | No |
communityDetermination | An identification applying one or more CommunityConcepts to a plotObservation by a party.| No |



Additional resource elements of the Veg-X schema are used to provide information about people, methods and bibliographic references:

Resource element               | Description                                     |  R |
------------------------------ | ----------------------------------------------- | --- |
party                          | Describes a responsible party (person or organization), and is typically used to name the originator of a resource or metadata document. | No |
attribute                      | A specific definition of a measured property. An attribute has to be one of three types: qualitative (unordered categorical variable, i.e. nominal), ordinal (ordered list of values) or quantitative (a numerical variable, either discrete or continuous. | Yes |
method                         | A specific method definition followed in the creation of the dataset (e.g. the measurement of pH, the estimation of plant abundance or the definition of strata). | Yes |
protocol                       | A specific grouping of methods related by common action. A protocol may have many method or steps.| No |
literatureCitation             | Provides overview information about the literature citation, including title, abstract, keywords, and contacts. | No |


## Internal structure of the main schema elements


### *project*

Projects are identified by their *title*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
title                 | TO BE DONE  | Yes |
personnel                 | TO BE DONE  | No |

### *plot*

Projects are identified by their *plotName*. 

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
plotName                 | Name or label for a plot, unique within the data set  | Yes |
plotUniqueIdentifier     | Plot identifier that is unique across the dataset, derived from the data source, and preferably globally unique. | No |
relatedPlot              | A plot may be related spatially to other plots in order to express parent-child, sub-plot or contiguity. | Yes (subplots) |
location | Geographic location of the plot. | Yes |
geometry | TO BE DONE | No |
topography | TO BE DONE | Yes |
placementMethod | Brief description of strategy for determining plot placement within the stand. | No |
partyWithRole | The party that undertook the plot placement | No |

### *plotObservation*

Plot observations are identified internally by their elements *plotID* and *obsStartDate*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
plotID                   | A reference to a specific plot by the plot ID       | Yes |
obsStartDate             | The start date of this specific observation of the plot. Recorded in ISO 8601 date format: yyyy-mm-dd.                   | Yes |
obsEndDate               | The end date of this specific observation of the plot. Recorded in ISO 8601 date format: yyyy-mm-dd.                   | Yes |
plotObservationUniqueIdentifier     | Plot observation identifier that is unique across the dataset, derived from the data source, and preferably globally unique. | No |
projectID | A reference to a specific 'project'.  | Yes |
partyWithRole | The party that undertook the plot observation. | No |
license | License linked to this plot observation. | No |
taxonomicQuality| Subjective assessment of the taxonomic quality on the plot. | No |
previousObservationID | Link to previous plot observations.	| No |
observationNarrative | Additional unstructured observations useful for understanding the ecological attributes and significance of the plot observations. 		| No |

### *taxonNameUsageConcept*

Taxon name usage concepts are identified by their element *authorName*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
authorName               | A string representing a taxon name that the author of the dataset used to refer to a taxon observed within the plot.       | Yes |

### *method*

Methods are identified by their element *name*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
name               | Name associated with the method. For example, "percent cover". | Yes |
description | A full description of the type of method e.g., measured parameter or basal area of all stems > 10 cm dbh or counts of all saplings >1.35 m tall and less than 2 cm dbh. | Yes |
protocolID | A reference to a protocol using its identifier | No |
citationID | A reference to a specific citation of literature. | No |
citationString | A string indicating the citation reference | Yes |

### *attribute*

Each attribute relates to one method and are identified by it. Attributes can be of three scales: *qualitative*, *ordinal* or *quantitative*; and the elements of attributes depend of the scale.

Sub-element (qualitative) | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
methodID               | A reference to a specific method that describes the context for the qualitative code. | Yes |
code | TO BE DONE | Yes | 
definition | The definition of the code. | Yes |

Sub-element (ordinal)     | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
methodID               | A reference to a method that describes the context for the ordinal code. | Yes |
code | Ordinal class code (e.g. a value like "+" or "1" in Braun-Blanquet cover scale) | Yes | 
definition | The definition of an ordinal number or symbol used to signify an ordered list. For example a cover class ordinal code such as 1 = >1-5 % | Yes |
lowerLimit | TO BE DONE | Yes |
upperLimit | TO BE DONE | Yes |
order | Explicit order in the sequence of ordinal values to which this code belongs | Yes |

Sub-element (quantitative) | Description                                        |  R  |
-------------------------- | -------------------------------------------------- | --- |
methodID               | A reference to a specific method that describes the context for the quantitative attribute. | Yes |
unit | Unit of measurement (e.g. mm, cm, square meters, number of individuals). | Yes | 
precision | The smallest place value to which the measurement is expressed (eg, if pi is represented as 3.14, then its precision is .01). | No |
lowerBound | Potential lower limit of the measurement | Yes |
upperBound | Potential upper limit of the measurement | Yes |

### *stratumObservation*

Stratum observations are identified by *stratumID* and *plotObservationID*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
stratumID                | A reference to a specific stratum. | Yes |
plotObservationID        | A reference to a specific plotObservation. | Yes |
height                   | Average height to the top of the stratum.  | No |
base                     | Average height of the bottom of the stratum. | No |
stratumValue             | The value (e.g. cover, count) given to the observation in that strata | No |

### *aggregateOrganismObservation*

Aggregate organism observations are identified by *plotObservationID* and *taxonNameUsageConceptID* (and by *stratumObservationID* when defined).

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
plotID                   | A reference to a specific plot. | Yes |
taxonNameUsageConceptID  | A reference to a specific taxonNameUsageConcept representing a taxon occurrence. | Yes |
stratumObservationID     | A reference to a specific stratum observation. | Yes |
aggregateValue           | A simple measurement for a aggregate value.  | Yes |
height                   | Optional height at which the aggregated observation was made, e.g. in meters. | No |

### *individualOrganism*

Individual organisms are identified by *plotID* and *identificationLabel*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
plotID                   | A reference to a specific plot. | Yes |
identificationLabel      | A label that is associated with an individual (e.g. a numerical tree tag). | Yes |
taxonNameUsageConceptID  | A reference to a specific taxonNameUsageConcept representing a taxon occurrence. | Yes |
birthDate | TO BE DONE | No |
relatedIndividual | An item may be related or connected in some way to other items. For example fused stems, epiphytic relationships or mapped individuals. | No |
relativePosition | Relative position of organism described in geometric space within the plot the organism is located in. Relative to the plot point of origin. | No |


### *individualOrganismObservation*

Individual organism observations are identified by *plotObservationID* and *individualOrganismID*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
plotObservationID        | A reference to a specific plotObservation. | Yes |
individualOrganismID     | A reference to a specific individualOrganism. | Yes |
stratumObservationID     | A reference to a specific stratum observation that this individual was measured in on the plot. | Yes |
diameterBaseDistance     | A container for diameter measurements at a given distance along the stem from the ground. | Yes |
height     | TO BE DONE | No |
canopyVolume     | TO BE DONE | No |
multipleMeasurement | A n-tuple of a related measurements (e.g. paired data such as length, width and height to calculate volume). The definition of the relationship type is left open to the user, but is intended to allow specifying a set of measurements that have to be considered together.  | No |
individualOrganismHealth | Health of the individual organism referenced in this individual organism observation record. Usually used to describe dead stems. | No |

### *siteObservation*

Site observations are identified by *plotObservationID*.

Sub-element               | Description                                        |  R  |
------------------------- | -------------------------------------------------- | --- |
plotObservationID        | A reference to a specific plotObservation. | Yes |
legalProtection        | Legal protection status of the plot during the plot observation. | Yes |
landuse        | Landuse, for example pasture | Yes |
habitat        | A specific habitat type existing during this plot observation. | Yes |

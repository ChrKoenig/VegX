---
title: "Veg-X schema documentation"
author: "IAVS Ecoinformatics Working Group"
date: "19 Jan 2018"
output: 
  rmarkdown::html_vignette:
    css: mystyle.css
vignette: >
  %\VignetteIndexEntry{Veg-X schema documentation}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

## Overview of Veg-X

Our goal was to produce a standard specifically for vegetation-plot data that is relatively simple to read and use. To achieve this we avoided highly nested structures and included major vegetation data components (e.g. plot attributes, plot observations, organisms) as top-level elements that are referenced by  each other through unique identifiers (e.g. a unique numerical ID) that allow the integrity of the original linkage to be captured. Although the main logical structure of vegetation data (i.e. the logical relationships between major data components) is fixed, we allowed for alternative, user-defined ways of grouping observations. As such, the standard can accommodate projects that are linked across time as well as longitudinal measures of plots or individuals to the extent that these are referenced in the original dataset through appropriate unique identifiers in those original sources.

The standard accommodates different data collection protocols by allowing specific aspects of data collection methods to be captured, such as whether plots were located subjectively or randomly, plot dimensions, definitions of cover-abundance scales, references to published methods, etc. The standard also allows for the original units of measurement to be retained. All elements in the standard are clearly defined. This allows synonymous terms in source datasets to be mapped to a common set of concepts, thus overcoming the problems caused by inconsistent terminologies.
The plotObservation is the central Veg-X element, resulting from sampling a physical plot at a specific point in time, and can be related to one or more research projects (Fig. 3). The information about a sampled plot that is fixed over time (e.g. altitude, plot identifier or name, dimensions, aspect, slope, geology) and references to related plots (e.g. a parent plot) are stored in the separate element plot. By structuring the plot data in this way, repeat measures and nested plots can be accommodated in the standard. For the top-level element project we adopted the Ecological Metadata Language (EML; http://knb.ecoinformatics.org/software/eml/)  project module. EML provides structured, well-defined categories for documenting the key aspects of ecological datasets and is supported by a number of institutions (Jones et al. 2006).
Specific observations, either biotic or abiotic, are components of the plot observation element. The standard allows for observations of vegetation at both the individual specimen (individualOrganismObservation) and aggregated organism (aggregateOrganismObservation) levels. The standard maintains a clear distinction between the entity of interest (e.g. an individual organism, plot, or stratum) and the observation act (e.g. a measuring event applied to it). Together with unique identifiers that maintain the integrity of references between individual records within each component (e.g. between a plot and all the measuring events applied to it), the separation of components allows the standard to store multiple observations of the same entity (e.g. a plot or a tree). Analogously, a single observation event (e.g. a plot observation) may apply to multiple entities, thereby providing explicit grouping of entity observations. Each entity of interest (e.g. a tree) may have multiple observed properties (e.g. height, dbh) whose values are determined through measurement using a specific procedure or a method belonging to a particular protocol. Unlike individual organism observations, aggregated organism observations do not relate to a specific physical entity but provide estimates of the importance of a (abstract) taxonomic entity within the plot, such as through a cover estimate. Strata can be the subject of stratum observations (e.g. % of tree cover, tree height) and can be linked to aggregated organisms observations (Fig. 3). 
	The standard also maintains a distinction between taxonomic identity (the taxon or taxon concept) and how these identities are applied to particular observations of organisms. This is done through three top-level elements: (1) taxonConcept is a specific taxonomic concept (i.e. a name–reference combination); (2) taxonNameUsageConcept is a particular type of organism referencing one or more individual or aggregate occurrences in one or more plots and typically associated with a taxon name string used by the author of the dataset; (3) taxonDetermination is an assertion, made by a party, linking one or more taxonConcepts to a taxonNameUsageConcept. All the organism observations referencing a given taxonNameUsageConcept are affected by determination events applied to it. This allows different determinations and taxonomic concepts to be associated with a vegetation entity so temporal changes in opinion regarding identification (i.e. "determination history") can be recorded and both formal (i.e. taxon names) and informal (e.g. "field names", "morphospecies") names applied simultaneously to a particular organism observation can be preserved. The fact that the taxonNameUsageConcept is not nested within observations permits the same name string to be reused within the scope of the dataset. Community determinations are handled in a similar way: communityDetermination elements allow a given plot observation to be related to one or multiple community concepts, although the lack of informal field names removes the need for a communityNameUsageConcept entity.
Although the standard supports fully-specified taxonomic concepts, it does not require them. This is important as the full concept is unspecified and furthermore unrecoverable for most legacy data. On the other hand, because the schema can accommodate determination information (who did the identification, when, and with what reference), in theory it could be possible to recover concepts for many legacy datasets – in particular, tropical forest plots where such information is commonly preserved in the form of herbarium voucher specimens.
Veg-X is written as an XML schema, which is a definition of user-defined tags to structure textual information in order to create self-describing datasets. XML (Extensible Markup Language) is an open standard, and XML files are both machine and human-readable (they are stored in plain-text ASCII format). These characteristics help to ensure that data in this format will be accessible in the future. We made use of existing XML schema definitions, which we incorporated as modules of our schema. Specifically, we used parts of the Ecological Metadata Language to define entities like projects or protocols. Similarly, we used TDWG standards such as the Darwin Core geospatial extension (http://wiki.tdwg.org/twiki/bin/view/DarwinCore/GeospatialExtension) to deal with georeferences, and the Taxon Concept Schema (http://www.tdwg.org/standards/117/) for taxon names and concepts. Updated versions of the Veg-X XML schema, as well as a prototype import/export utility, can be found at the TDWG Vegetation Web group page (http://wiki.tdwg.org/twiki/bin/view/Vegetation/WebHome).
